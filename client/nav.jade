template(name='nav')
    .ui.fluid.attached.borderless.inverted.small.menu.topnav
        a.item(href="/" class="{{isActivePath 'home'}}")
            i.large.code.icon
        if currentUser
            a.item.set_user(href="/users" class="{{isActiveRoute 'users'}}" title='members')
                i.large.users.icon
                // span.mobile.hidden members
            a.item.set_event(href="/m/event" class="{{isActiveRoute 'events'}}" title='events')
                i.large.calendar.icon
                // span.mobile.hidden events
            // a.item(href="/shop" class="{{isActiveRoute 'shop'}}" title='shop')
            // a.item.set_product(href="/m/product" class="{{isActiveRoute 'shop'}}" title='shop')
            //     i.large.shop.icon
            //     +iios name='shop'
            a.item.set_discussion(href="/discussions" class="{{isActiveRoute 'discussions'}}" title='discussions')
                i.large.chat.icon
            a.item.set_discussion(href="/m/group" class="{{isActiveRoute 'discussions'}}" title='groups')
                i.large.users.circular.icon
            a.item.set_request(href="/m/request" class="{{isActiveRoute 'requests'}}" title='requests')
                i.large.hand.holding.heart.icon
                // +iios name='request-service'
                // span.mobile.hidden requests
            a.item.set_project(href="/m/gig" class="{{isActivePath 'gigs'}}" title='projects')
                i.large.wrench.icon
                // span.mobile.hidden projects
            if is_admin
                a.icon.item(href="/m/model" class="{{isActivePath regex='model'}}" title='models')
                    i.database.icon
        .right.menu
            // a.item.add_gift(class="{{isActivePath regex='gift_edit'}}" title='gift')
            //     i.large.gift.icon
            //     span.mobile.hidden gift
            // a.item.add_request(class="{{isActivePath regex='request_edit'}}" title='request')
            //     i.large.hand.holding.heart.icon
            //     span.mobile.hidden request
            if currentUser
                a.icon.item.add(href="/add" title='add') 
                    i.plus.large.icon
            if is_in_admin
                a.icon.item.toggle_admin
                    i.shield.icon
            if currentUser
                a.large.item.view_profile(href="/user/#{currentUser.username}" class="{{isActivePath regex='profile_layout'}}")
                    //- i.large.user.large.icon
                    if currentUser.profile_image_id
                        img.ui.avatar.compact.image(src="{{c.url currentUser.profile_image_id height=200 width=200 gravity='face' crop='fill'}}")
                    else 
                        i.large.user.large.icon
                    |#{currentUser.username}
                    // |#{currentUser.points}
            else
                a.item(href="/register" title='register')
                    // |login
                    i.large.chevron.right.icon
                a.item(href="/login" title='login')
                    // |login
                    i.large.chevron.right.icon
